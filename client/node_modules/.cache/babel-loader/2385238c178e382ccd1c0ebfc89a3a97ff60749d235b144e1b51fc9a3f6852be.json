{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useGetUserID}from'../hooks/useGetUserID.js';import{useCookies}from'react-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const Home=()=>{const[recipes,setRecipes]=useState([]);const[savedRecipes,setSavedRecipes]=useState([]);const[cookies,_]=useCookies([\"access_token\"]);const userID=useGetUserID();useEffect(()=>{const fetchRecipe=async()=>{try{const response=await axios.get(\"http://localhost:5000/recipes\");setRecipes(response.data);}catch(err){console.error(err);}};const fetchSavedRecipe=async()=>{try{const response=await axios.get(\"http://localhost:5000/recipes/savedRecipes/ids/\".concat(userID));setSavedRecipes(response.data.savedRecipes);}catch(err){console.error(err);}};fetchRecipe();if(cookies.access_token)fetchSavedRecipe();},[]);const saveRecipe=async recipeID=>{try{const response=await axios.put(\"http://localhost:5000/recipes\",{recipeID,userID},{headers:{authorization:cookies.access_token}});setSavedRecipes(response.data.savedRecipes);}catch(err){console.log(err);}};const isRecipeSaved=id=>savedRecipes.includes(id);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"recipes-home-title\",children:\"Recipes\"}),/*#__PURE__*/_jsx(\"ul\",{children:recipes.map(recipe=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:recipe.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>saveRecipe(recipe._id),disabled:isRecipeSaved(recipe._id),children:isRecipeSaved(recipe._id)?\"Saved\":\"Save\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ingredients\",children:/*#__PURE__*/_jsx(\"p\",{children:recipe.ingredients+\",\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"instructions\",children:/*#__PURE__*/_jsx(\"p\",{children:recipe.instructions})}),/*#__PURE__*/_jsx(\"img\",{src:recipe.imageUrl,alt:recipe.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cooking Time: \",recipe.cookingTime,\" minutes\"]})]},recipe._id))})]});};","map":{"version":3,"names":["React","useEffect","useState","axios","useGetUserID","useCookies","jsx","_jsx","jsxs","_jsxs","Home","recipes","setRecipes","savedRecipes","setSavedRecipes","cookies","_","userID","fetchRecipe","response","get","data","err","console","error","fetchSavedRecipe","concat","access_token","saveRecipe","recipeID","put","headers","authorization","log","isRecipeSaved","id","includes","children","className","map","recipe","name","onClick","_id","disabled","ingredients","instructions","src","imageUrl","alt","cookingTime"],"sources":["/home/ubuntu/recipe-app-docker/client/src/pages/home.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useGetUserID } from '../hooks/useGetUserID.js';\nimport { useCookies } from 'react-cookie';\n\n\nexport const Home = () => {\n    const [recipes, setRecipes] = useState([]);\n    const [savedRecipes, setSavedRecipes] = useState([]);\n    const [cookies, _] = useCookies([\"access_token\"]);\n\n\n    const userID = useGetUserID();\n\n    useEffect(() => {\n\n        const fetchRecipe = async() => {\n        try{\n            const response = await axios.get(\"http://localhost:5000/recipes\");\n            setRecipes(response.data);\n        } catch (err) {\n            console.error(err);\n        }\n        };\n\n        const fetchSavedRecipe = async() => {\n            try{\n                const response = await axios.get(`http://localhost:5000/recipes/savedRecipes/ids/${userID}`);\n                setSavedRecipes(response.data.savedRecipes);\n            } catch (err) {\n                console.error(err);\n            }\n            };\n    \n        \n\n    fetchRecipe();\n\n    if (cookies.access_token) fetchSavedRecipe();\n    }, []);\n\n    const saveRecipe = async (recipeID) => {\n    try{\n       \n        const response = await axios.put(\"http://localhost:5000/recipes\", {\n            recipeID,\n            userID,\n        },\n        { headers: { authorization: cookies.access_token },});\n        setSavedRecipes(response.data.savedRecipes);\n    }   catch (err) {\n        console.log(err);\n    }\n};\n\n const isRecipeSaved = (id) => savedRecipes.includes(id);\n\n return (\n    <div>\n      <h1 className = \"recipes-home-title\">Recipes</h1>\n      <ul>\n        {recipes.map((recipe) => (\n          <li key={recipe._id}>\n            <div>\n              <h2>{recipe.name}</h2>\n              <button\n                onClick={() => saveRecipe(recipe._id)}\n                disabled={isRecipeSaved(recipe._id)}\n              >\n                {isRecipeSaved(recipe._id) ? \"Saved\" : \"Save\"}\n              </button>\n            </div>\n            <div className=\"ingredients\">\n              <p>{recipe.ingredients + \",\"}</p>\n            </div>\n            <div className=\"instructions\">\n              <p>{recipe.instructions}</p>\n            </div>\n            <img src={recipe.imageUrl} alt={recipe.name} />\n            <p>Cooking Time: {recipe.cookingTime} minutes</p>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}